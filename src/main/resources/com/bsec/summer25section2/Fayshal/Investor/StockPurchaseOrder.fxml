<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<VBox prefHeight="700.0" prefWidth="600.0" spacing="20.0" style="-fx-padding: 20;" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.bsec.oop.Fayshal.Investor.StockPurchaseOrder">
    <children>
        <!-- Header -->
        <Label style="-fx-font-size: 24px; -fx-font-weight: bold;" text="Stock Purchase Order" />

        <!-- Market Selection -->
        <HBox spacing="10.0">
            <children>
                <Label style="-fx-font-size: 14px;" text="Market:" />
                <ComboBox fx:id="marketComboBox" prefWidth="300.0" promptText="Select a market" />
            </children>
        </HBox>

        <!-- Stock Selection -->
        <HBox spacing="10.0">
            <children>
                <Label style="-fx-font-size: 14px;" text="Stock Symbol:" />
                <ComboBox fx:id="stockComboBox" onAction="#onStockSelected" prefWidth="300.0" promptText="Select a stock" />
            </children>
        </HBox>

        <!-- Current Price Display -->
        <HBox spacing="10.0">
            <children>
                <Label style="-fx-font-size: 14px;" text="Current Price:" />
                <Label fx:id="currentPriceLabel" style="-fx-font-size: 14px; -fx-text-fill: blue;" text="0.00" />
            </children>
        </HBox>

        <!-- Quantity -->
        <HBox spacing="10.0">
            <children>
                <Label style="-fx-font-size: 14px;" text="Quantity:" />
                <TextField fx:id="quantityField" prefWidth="200.0" promptText="Enter number of shares" />
            </children>
        </HBox>

        <!-- Order Type -->
        <HBox spacing="10.0">
            <children>
                <Label style="-fx-font-size: 14px;" text="Order Type:" />
                <ComboBox fx:id="orderTypeComboBox" prefWidth="200.0" promptText="Select Order Type">
                </ComboBox>
            </children>
        </HBox>

        <!-- Price Limit (for limit orders) -->
        <HBox spacing="10.0">
            <children>
                <Label style="-fx-font-size: 14px;" text="Price Limit:" />
                <TextField fx:id="priceLimitField" prefWidth="200.0" promptText="Enter limit price (optional)" />
            </children>
        </HBox>

        <!-- Balance Display -->
        <HBox spacing="10.0">
            <children>
                <Label style="-fx-font-size: 14px;" text="Available Balance:" />
                <Label fx:id="balanceLabel" style="-fx-font-size: 14px; -fx-text-fill: green;" text="0.00" />
            </children>
        </HBox>

        <!-- Total Cost -->
        <HBox spacing="10.0">
            <children>
                <Label style="-fx-font-size: 14px;" text="Total Cost:" />
                <Label fx:id="totalCostLabel" style="-fx-font-size: 14px; -fx-text-fill: blue;" text="0.00" />
            </children>
        </HBox>

        <!-- Remaining Balance -->
        <HBox spacing="10.0">
            <children>
                <Label style="-fx-font-size: 14px;" text="Remaining Balance:" />
                <Label fx:id="remainingBalanceLabel" style="-fx-font-size: 14px; -fx-text-fill: green;" text="0.00" />
            </children>
        </HBox>

        <!-- Buttons -->
        <HBox spacing="20.0" style="-fx-alignment: center;">
            <children>
                <Button onAction="#refreshBalance" style="-fx-font-size: 14px;" text="Refresh Balance" />
                <Button onAction="#calculateTotal" style="-fx-font-size: 14px;" text="Calculate Total" />
                <Button fx:id="placeOrderBtn" onAction="#placeOrder" style="-fx-font-size: 14px; -fx-text-fill: black;" text="Place Order" />
                <Button onAction="#clearForm" style="-fx-font-size: 14px;" text="Clear Form" />
            </children>
        </HBox>

        <!-- Status -->
        <TextArea fx:id="statusArea" editable="false" prefHeight="80.0" style="-fx-font-size: 12px; -fx-text-fill: red;" />

        <!-- Order History -->
        <Label style="-fx-font-size: 16px; -fx-font-weight: bold;" text="Recent Order History:" />
        <TableView fx:id="orderHistoryTable" prefHeight="200.0">
            <columns>
                <TableColumn fx:id="orderDateColumn" prefWidth="120.0" text="Order Date" />
                <TableColumn fx:id="orderTimeColumn" prefWidth="100.0" text="Time" />
                <TableColumn fx:id="orderSymbolColumn" prefWidth="80.0" text="Symbol" />
                <TableColumn fx:id="orderTypeColumn" prefWidth="80.0" text="Type" />
                <TableColumn fx:id="orderQuantityColumn" prefWidth="80.0" text="Quantity" />
                <TableColumn fx:id="orderPriceColumn" prefWidth="100.0" text="Price (à§³)" />
                <TableColumn fx:id="orderAmountColumn" prefWidth="120.0" text="Total Amount" />
                <TableColumn fx:id="orderStatusColumn" prefWidth="100.0" text="Status" />
                <TableColumn fx:id="orderFeesColumn" prefWidth="80.0" text="Fees" />
                <TableColumn fx:id="orderReferenceColumn" prefWidth="120.0" text="Reference ID" />
            </columns>
        </TableView>

        <!-- Back Button -->
        <HBox style="-fx-alignment: center;">
            <children>
                <Button onAction="#goBackToMenu" style="-fx-font-size: 14px;" text="Back to Menu" />
            </children>
        </HBox>
    </children>
</VBox>
